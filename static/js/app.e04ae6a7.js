(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,n,t){e.exports=t("56d7")},"4b93":function(e,n,t){},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var r=t("2b0e"),o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},a=[],s=(t("5c0b"),t("2877")),i={},c=Object(s["a"])(i,o,a,!1,null,null,null),u=c.exports,l=(t("d3b7"),t("3ca3"),t("ddb0"),t("8c4f")),d=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"login-page",attrs:{id:"loginPage"}},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,"auto-complete":"on"}},[t("div",{staticClass:"title-container"},[t("h3",{staticClass:"title"},[e._v("系统登录")])]),t("el-form-item",{attrs:{prop:"username"}},[t("span",{staticClass:"icon-container"},[t("i",{staticClass:"el-icon-user-solid"})]),t("el-input",{ref:"username",attrs:{placeholder:"请输入账号","auto-complete":"on",name:"username"},model:{value:e.loginForm.username,callback:function(n){e.$set(e.loginForm,"username",n)},expression:"loginForm.username"}})],1),t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"icon-container"},[t("i",{staticClass:"el-icon-s-goods"})]),t("el-input",{key:e.passwordType,ref:"password",attrs:{placeholder:"请输入密码","auto-complete":"on",name:"password",type:e.passwordType},model:{value:e.loginForm.password,callback:function(n){e.$set(e.loginForm,"password",n)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("i",{class:"password"===e.passwordType?"el-icon-watermelon":"el-icon-view"})])],1),t("el-button",{attrs:{loading:e.loading,type:"primary"},nativeOn:{click:function(n){return n.preventDefault(),e.handleLogin(n)}}},[e._v("登录")])],1)],1)},p=[],f=(t("10cb"),t("450d"),t("f3ad")),m=t.n(f),h=(t("425f"),t("4105")),g=t.n(h),w=(t("eca7"),t("3787")),b=t.n(w),v=(t("1951"),t("eedf")),k=t.n(v);t("498a");function y(e){var n=/^[a-z]+$/g;return n.test(e.trim())}function j(e){return e.length>=5}var P=t("5f87"),$=(t("0fb7"),t("f529")),O=t.n($),F=t("bc3a"),T=t.n(F),C=T.a.create({baseURL:"/prod-api",withCredentials:!0,timeout:5e3});C.interceptors.request.use((function(e){return Object(P["a"])()&&(e.headers["X-Token"]=Object(P["a"])()),e}),(function(e){return console.log(e),Promise.reject(e)})),C.interceptors.response.use((function(e){var n=e.data;return 2e4!==n.code?Promise.reject(n||"error"):n}),(function(e){return console.log("err"+e),O()({message:e.message,type:"error",duration:5e3}),Promise.reject(e)}));var x=C;function q(e){return x({url:"/user/login",method:"post",data:e})}var E={name:"Login",data:function(){return{loginForm:{username:"",password:""},loginRules:{username:[{required:!0,trigger:"blur",validator:this.validateUsername}],password:[{required:!0,trigger:"blur",validator:this.validatePassword}]},loading:!1,redirect:void 0,passwordType:"password"}},mounted:function(){this.$refs.username.focus()},watch:{$route:{handler:function(e){this.redirect=e.query&&e.query.redirect},immediate:!0}},components:{"el-button":k.a,"el-form-item":b.a,"el-form":g.a,"el-input":m.a},computed:{},methods:{handleLogin:function(){var e=this;this.$refs.loginForm.validate((function(n){if(!n)return!1;e.loading=!0;var t=e.loginForm,r=t.username,o=t.password;q({username:r.trim(),password:o}).then((function(n){var t=n.data;Object(P["c"])(t.token),e.$router.push({path:e.redirect||"/"}),e.loading=!1})).catch((function(n){e.$router.push({name:"Error",query:{message:n.message,goBackPath:e.$route.fullPath}}),e.loading=!1}))}))},validateUsername:function(e,n,t){y(n)?t():t(new Error("用户名只能包含小写字母"))},validatePassword:function(e,n,t){j(n)?t():t(new Error("密码长度不小于5位"))},showPwd:function(){var e=this;"password"===this.passwordType?this.passwordType="":this.passwordType="password",this.$nextTick((function(){e.$refs.password.focus()}))}}},U=E,_=(t("ede7"),t("a6a2"),Object(s["a"])(U,d,p,!1,null,"4a64084e",null)),L=_.exports;r["default"].use(l["a"]);var R=[{path:"/",redirect:"/index"},{path:"/login",name:"Login",component:L},{path:"/index",name:"Home",component:function(){return Promise.all([t.e("chunk-elementUI"),t.e("chunk-016fbd86")]).then(t.bind(null,"bb51"))}},{path:"/error",name:"Error",props:function(e){return{message:e.query.message,goBackPath:e.query.goBackPath}},component:function(){return Promise.all([t.e("chunk-elementUI"),t.e("chunk-3d2f6d20")]).then(t.bind(null,"dda8"))}}],I=new l["a"]({routes:R}),B=l["a"].prototype.push;l["a"].prototype.push=function(e,n,t){return n||t?B.call(this,e,n,t):B.call(this,e).catch((function(e){return e}))};var J=I,A=t("5530"),S=t("1da1"),z=(t("96cf"),t("323e")),D=t.n(z);t("a5d8");function H(e){return x({url:"/user/info",method:"get",params:{token:e}})}D.a.configure({showSpinner:!1}),J.beforeEach(function(){var e=Object(S["a"])(regeneratorRuntime.mark((function e(n,t,r){var o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:D.a.start(),o=Object(P["a"])(),o?"/login"===n.path?(r({path:"/"}),D.a.done()):(a=Object(P["b"])(),a?r():H(o).then((function(e){Object(P["d"])(e.data),r(Object(A["a"])(Object(A["a"])({},n),{},{replace:!0}))})).catch((function(){r("/login?redirect=".concat(n.path)),D.a.done()}))):o||"/login"===n.path||"/error"===n.path?r():(console.log(n),r("/login?redirect=".concat(n.path)),D.a.done());case 3:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()),J.afterEach((function(){D.a.done()})),r["default"].config.productionTip=!1,new r["default"]({router:J,render:function(e){return e(u)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";t("9c0c")},"5f87":function(e,n,t){"use strict";t.d(n,"a",(function(){return i})),t.d(n,"c",(function(){return c})),t.d(n,"b",(function(){return u})),t.d(n,"d",(function(){return l}));var r=t("a78e"),o=t.n(r),a="Admin-Token",s="Admin-UserInfo";function i(){return o.a.get(a)}function c(e){return o.a.set(a,e)}function u(){return o.a.getJSON(s)}function l(e){return o.a.set(s,e)}},"6e50":function(e,n,t){},"9c0c":function(e,n,t){},a6a2:function(e,n,t){"use strict";t("4b93")},ede7:function(e,n,t){"use strict";t("6e50")}},[[0,"runtime","chunk-elementUI","chunk-libs"]]]);